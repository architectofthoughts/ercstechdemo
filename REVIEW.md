# ERCS: Project Review & Game Design Document

이 문서는 현재 구현된 테크 데모(`ercstechdemo`)를 바탕으로, 향후 개발될 실제 게임의 기획 및 설계 방향성을 정리한 문서입니다.

## 1. 게임 개요 (Game Overview)

### 1.1 기본 정보
- **장르**: 로그라이크 덱빌딩 카드 배틀 (Roguelike Deck-building Card Battle)
- **플랫폼**: Web (PC/Mobile Responsive)
- **핵심 컨셉**: "운명적 한 방(Finale)"과 "기억(Memorial)"을 테마로 한 전략적 전투 게임.

### 1.2 핵심 게임 루프 (Core Loop)
1. **준비 (Preparation)**: 캐릭터 선택, DNA(특성) 설정, 덱 구성.
2. **탐험 (Exploration)**: 헥사곤 타일 맵을 통한 비선형적 진행 (전투, 이벤트, 보스 선택).
3. **전투 (Combat)**: 카드를 사용한 턴제 전투. 적의 의도(Intent)를 파악하고 대응.
4. **성장 (Progression)**: 전투 승리 후 보상 획득, 유물/카드 수집.
5. **결말 (Conclusion)**: 보스 처치 후 탈출(Extraction) 또는 패배 시 로그 초기화.

---

## 2. 게임플레이 메카닉 (Gameplay Mechanics)

### 2.1 전투 시스템 (Battle System)
현재 `BattleScene` 및 `App.tsx`에 구현된 로직을 기반으로 합니다.

- **자원 (Mana)**: 매 턴 일정량(기본 3)의 마나를 회복하며, 카드 사용 시 소모됩니다.
- **카드 (Cards)**:
  - **Attack**: 적에게 직접적인 데미지를 줍니다.
  - **Skill**: 방어도(Block)를 얻거나 특수 효과를 부여합니다.
  - **Power/Status/Curse**: (향후 확장 예정) 지속 효과 및 상태 이상.
- **적 행동 (Enemy Intent)**: 적은 다음 턴에 할 행동(공격, 방어, 디버프 등)을 미리 예고합니다. 플레이어는 이를 보고 전략을 수립해야 합니다.
- **피날레 (Finale System)**:
  - **조건**: 적의 체력이 일정 이하(예: 50% 미만)이고, 플레이어의 마나와 카드가 충분할 때 발동 가능.
  - **효과**: 화면 전체를 덮는 화려한 연출과 함께 적을 즉사시키거나 막대한 피해를 입힘.
  - **UX**: 화면 하단에서 위로 드래그하는 제스처로 발동.
- **데스티니 드로우 (Destiny Draw)**:
  - **개념**: 위기 상황이나 특정 조건에서 발동하는 "기적의 드로우".
  - **연출**: 기존 패를 모두 버리고(Discard), 강력한 "운명의 카드" 한 장을 뽑는 극적인 연출.

### 2.2 탐험 시스템 (Map System)
`MapDemo` 컴포넌트 기반.

- **구조**: 헥사곤(육각형) 타일들이 연결된 노드 형태의 맵.
- **노드 타입**:
  - **Battle**: 일반 몬스터와의 전투.
  - **Elite/Boss**: 강력한 적과의 전투.
  - **Event**: 선택지에 따른 보상이나 페널티가 주어지는 스토리 이벤트.
  - **Rest/Shop**: (기획 예정) 체력 회복이나 카드 강화/구매.
- **진행 방식**: 현재 위치에서 연결된 인접 노드로만 이동 가능. 뒤로 돌아갈 수 없음.

### 2.3 캐릭터 및 성장 (Character & Progression)
`CharacterSelectDemo`, `DNAScreen`, `RewardScreen` 기반.

- **캐릭터 선택**: 고유한 특성과 시작 덱을 가진 캐릭터(Agent)를 선택.
- **DNA 시스템**:
  - 캐릭터의 패시브 능력이나 스탯을 결정하는 시스템.
  - 시각적으로 DNA 나선 구조를 분석/조작하는 UI 제공.
- **보상 (Rewards)**:
  - 전투 승리 시 카드, 재화, 유물 등을 획득.

### 2.4 추출 시스템 (Extraction System)
`ExtractionScreen` 기반. 게임의 한 세션(Run)이 끝날 때 발동하는 독특한 정산 시스템입니다.

- **개념**: "추출 프로토콜(Extraction Protocol)". 이번 생존에서 얻은 성과를 점수화하여 다음 생존을 위한 자원이나 이점으로 변환합니다.
- **재화**: **추출 점수 (Extraction Points, EP)**.
- **기능**:
  - **자원 변환 (Material Conversion)**: EP를 가챠 재화인 '원시 에테르(Raw Ether)'로 변환. (다음 런의 이점은 포기)
  - **기억 보존 (Legacy Card)**: 현재 덱의 핵심 카드 1장을 다음 런으로 계승.
  - **전략적 이점 (Strategic Advantages)**:
    - **신경 가속**: 다음 런의 모든 전투 첫 턴에 카드 +1장 드로우.
    - **고대 유물함**: 무작위 희귀 카드를 가지고 시작.
  - **메모리 뱅크 (Memory Bank)**: 사용하지 않은 EP를 저장하여 나중에 사용.

### 2.5 가젯 시스템 (Gadget System)
슬레이 더 스파이어(Slay the Spire)의 유물(Relic)에 해당하는 시스템입니다.

- **컨셉**: "오마쥬에 진심인 게임". 고전 명작 게임이나 대중문화의 아이템을 '가젯'이라는 형태로 재해석합니다.
- **특징**:
  - **오마쥬 효과**: 원작 게임에서의 효과를 연상시키는 패시브 능력을 제공합니다.
    - *예: 'Retro Controller' (코나미 커맨드 입력 시 부활), 'Save Disk' (사망 시 1회 세이브 포인트 로드)*
  - **세트 수집**: 유사한 테마나 같은 게임 출신의 가젯들이 묶여서 해금되거나 시너지를 냅니다.
  - **획득처**: 정예 적 처치, 상점, 이벤트, 그리고 **가챠**를 통해 획득 가능.

### 2.6 가챠 시스템 (Gacha System)
`GachaScene` 기반.

- **핵심 철학**: **"No Real Money"**. 오직 게임 플레이를 통해 얻은 재화(원시 에테르)로만 이용 가능한 인게임 보상 시스템입니다.
- **목적**: 현대 모바일 게임의 "뽑기"가 주는 도파민과 기대감을 게임 내 재미 요소로 차용(Simulated Gacha Experience).
- **소환 대상**:
  - **캐릭터 (Agents)**: 새로운 플레이어블 캐릭터 (SSR/SR 등급).
  - **가젯 (Gadgets)**: 영구적인 패시브 효과를 주는 아이템.
  - **스킨/치장**: 캐릭터의 외형 변경 요소.
- **연출**:
  - 덱이 나타나고 카드가 흩뿌려지는 화려한 비주얼 (Scatter & Reveal).
  - 등급에 따른 카드 뒷면 및 발광 효과 (SSR: Gold, SR: Purple, R: Blue).

### 2.7 메모리얼 시스템 (Memorial System)
`MemorialApp` 기반.

- **개념**: 게임 내의 "기억"을 기록하고 열람하는 메타 시스템.
- **기능**:
  - 플레이 기록, 스토리의 중요한 순간, 획득한 희귀 아이템 등을 "스냅샷" 형태로 저장.
  - 별도의 OS/앱 느낌을 주는 독립적인 UI 디자인.

---

## 3. UI/UX 디자인 (Visual & Interaction)

### 3.1 디자인 언어 (Design Language)
- **테마**: Sci-Fi + Fantasy (Magical Tech).
- **컬러 팔레트**:
  - **Primary**: Deep Dark Blue/Black (배경)
  - **Accent**: Magical Gold (강조, UI 테두리), Neon Pink/Blue (효과)
- **타이포그래피**: 가독성 높은 고딕체(Sans-serif)와 장식적인 헤드라인 폰트 혼용.

### 3.2 인터랙션 (Interactions)
- **물리 기반 카드 핸들링 (Spinning Demo)**:
  - 손패의 카드를 드래그하여 회전시키거나 흩뿌리는 물리 엔진 효과.
  - 정적인 카드 게임에 역동성을 부여.
- **제스처 컨트롤**:
  - 드래그 앤 드롭으로 카드 사용.
  - 화면 쓸어올리기(Swipe Up)로 피날레 발동.
  - 덱을 길게 눌러(Long Press) 데스티니 드로우 발동.
- **마이크로 인터랙션**: 버튼 호버, 화면 전환, 텍스트 타이핑 효과 등 세밀한 애니메이션 적용.

---

## 4. 기술적 아키텍처 (Technical Architecture)

### 4.1 클라이언트 (Client)
- **Framework**: React 18+
- **Language**: TypeScript
- **Build Tool**: Vite
- **Styling**: Tailwind CSS + CSS Modules (복잡한 애니메이션용)
- **Animation**: Framer Motion (UI 전환), React Spring (물리 효과)

### 4.2 데이터 구조 (Data Structure)
- **GameState**: 전투 상태, 맵 진행도, 플레이어 상태 등을 관리하는 전역 상태.
- **Card Object**: `id`, `cost`, `type`, `effect_logic` 등을 포함하는 객체.
- **Enemy Object**: `hp`, `intent`, `animations` 등을 포함.

---

## 5. 향후 개발 로드맵 (Future Roadmap)

### Phase 1: 코어 루프 완성 (현재 단계)
- [x] 기본 전투 시스템 (공격, 방어, 적 행동)
- [x] 맵 이동 및 노드 선택
- [x] 캐릭터 선택 및 기본 UI
- [x] 특수 연출 (피날레, 데스티니 드로우)

### Phase 2: 콘텐츠 확장
- [ ] **다양한 카드 및 적 추가**: 현재 하드코딩된 데이터를 확장 가능한 데이터베이스(JSON/Config)로 분리.
- [ ] **이벤트 시스템 고도화**: 텍스트 기반 이벤트와 선택지에 따른 분기 구현.
- [ ] **유물(Relic) 시스템**: 패시브 효과를 주는 아이템 구현.

### Phase 3: 시스템 고도화
- [ ] **저장 시스템 (Save/Load)**: 브라우저 LocalStorage 또는 백엔드 연동을 통한 진행 상황 저장.
- [ ] **사운드 및 이펙트**: 타격음, 배경음악, 파티클 이펙트 강화.
- [ ] **모바일 최적화**: 터치 인터페이스 개선 및 반응형 레이아웃 다듬기.

### Phase 4: 메타 게임
- [ ] **메모리얼 연동**: 플레이 기록이 실제 메모리얼 앱에 저장되어 도감처럼 활용.
- [ ] **가챠(Gacha) 시스템**: 인게임 재화 전용 소환 시스템 구현 및 연출 고도화.
- [ ] **가젯(Gadget) 구현**: 다양한 오마쥬 아이템 기획 및 구현.

---

이 문서는 프로젝트의 진행 상황에 따라 지속적으로 업데이트될 예정입니다.
